<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accés al Cofre</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Fuente pirata legible -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&display=swap" rel="stylesheet" />
  
  <style>
    body {
      background-image: url('https://www.transparenttextures.com/patterns/old-map.png');
      background-color: #f3e8d0;
      font-family: 'Cinzel', serif;
      color: #2e260f; /* marrón oscuro para todo el texto */
      padding-top: 2rem;
      display: flex;
      justify-content: center;
      min-height: 100vh;
      align-items: flex-start;
    }

    #contenedor-principal {
      margin-top: 3rem;
      max-width: 420px;
      width: 100%;
      background: rgba(236, 236, 235, 0.8);
      box-shadow: 0 0 20px rgb(50 40 10 / 0.5);
      border-radius: 1rem;
      padding: 2rem;
      color: #2e260f;
      font-weight: 700;
      font-size: 1rem;
      line-height: 1.8;
      text-align: justify;
      text-shadow: 1.5px 1.5px 3px rgba(0, 0, 0, 0.6);
      position: relative;
      min-height: 480px; /* para evitar salto de tamaño */
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .kraken-img-container {
      margin-top: -90px;
      margin-bottom: 1rem;
      pointer-events: none;
      text-align: center;
    }

    .kraken-img-container img {
      width: 14rem;
      height: auto;
      max-height: 12rem;
      filter: drop-shadow(2px 4px 4px rgb(0 0 0 / 0.35));
      border-radius: 0;
      object-fit: contain;
      display: inline-block;
      margin: 0 auto;
    }

    p {
      margin: 0;
      padding: 0.8rem 1rem;
      color: #4b3e1b;
      background-color: transparent;
      border-radius: 0;
    }

    button {
      font-family: 'Cinzel', serif;
      font-weight: 700;
      border-radius: 0;
      padding: 0.75rem 2.5rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgb(59 47 26 / 0.6);
      border: none;
      transition: background-color 0.3s ease;
      align-self: center;
    }

   /* Botón OK igual estilo que Tornar y Comprovar */
#btnOk {
  background-color: #2e260f;
  color: white;
  border-radius: 0.5rem;
  padding: 0.75rem 0;
  font-family: 'Cinzel', serif;
  font-weight: 700;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 10px rgb(59 47 26 / 0.6);
  transition: background-color 0.3s ease;
  width: 100%;
  max-width: 300px;
  margin: 1rem auto 0 auto;
  display: block;
  text-align: center;
}

#btnOk:hover {
  background-color: #1f1908;
}

/* Input paraula secreta con estilo consistente */
#contenedor-principal input[type="password"] {
  width: 100%;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  border: 1px solid #8b7d4a;
  font-family: 'Cinzel', serif;
  font-weight: 700;
  font-size: 1rem;
  outline: none;
  box-sizing: border-box;
  margin-bottom: 1rem;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

#contenedor-principal input[type="password"]:focus {
  border-color: #2e260f;
  box-shadow: 0 0 5px 2px #2e260f88;
}


    #formulari input[type="password"] {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      border: 1px solid #8b7d4a;
      font-family: 'Cinzel', serif;
      font-weight: 700;
      font-size: 1rem;
      outline: none;
      box-sizing: border-box;
    }

    #formulari input[type="password"]:focus {
      border-color: #2e260f;
      box-shadow: 0 0 5px 2px #2e260f88;
    }

    #menuOpcions {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      justify-content: center;
    }

    #menuOpcions button {
      flex: 1;
      padding: 0.75rem 0;
      border-radius: 0.5rem;
      font-family: 'Cinzel', serif;
      font-weight: 700;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgb(59 47 26 / 0.6);
      transition: background-color 0.3s ease;
      color: white;
    }

    #btnTornar {
      background-color: #6b5e33;
    }

    #btnTornar:hover {
      background-color: #5a4e28;
    }

    #btnComprovar {
      background-color: #2e260f;
    }

    #btnComprovar:hover {
      background-color: #1f1908;
    }

    #missatge {
      text-align: center;
      font-weight: 700;
      color: #b32626;
      min-height: 1.2rem;
      margin-top: 0.5rem;
    }

    .llave-icon {
      position: absolute;
      top: 1rem;
      left: 1rem;
      width: 80px;
      height: auto;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <div id="contenedor-principal">
    <!-- Aquí se insertará contenido dinámicamente -->
  </div>

  <!-- Cofre modal -->
  <div id="cofre" class="hidden fixed inset-0 flex items-center justify-center bg-black/60 z-50">
    <div class="bg-white text-center p-8 rounded-2xl shadow-xl max-w-md w-full">
      <h2 class="text-2xl font-semibold text-neutral-800 mb-4">Accés concedit</h2>
      <p class="text-neutral-600 mb-4">Has trobat el tresor ocult. Enhorabona, grumet!</p>
      <button
        onclick="tancarCofre()"
        class="mt-2 px-5 py-2 bg-neutral-800 text-white rounded-lg hover:bg-neutral-900"
      >
        Tancar
      </button>
    </div>
  </div>

<script>
  const contenedor = document.getElementById('contenedor-principal');

  // Contenido inicial - historia
  const historiaHTML = `
    <div class="kraken-img-container">
      <img src="images/calavera.png" alt="Kraken" />
    </div>
    <p>
      Fa molts segles, pirates de tot el món es reunien a la UAB, un lloc sagrat de coneixement i recerca. Van crear el Projecte Kraken per caçar la criatura més temuda dels oceans: el Kraken, un monstre gegantí amb tentacles poderosos.
    </p>
    <p>
      La tripulació va lluitar amb valentia, però només un va sobreviure per explicar la història i ensenyar-la a les futures generacions.
    </p>
    <p>
      Ara, seguint el seu llegat, ets tu qui ha de trobar la nova tripulació per continuar aquesta odissea.
    </p>
    <p>
      La UAB torna a ser el cor de la recerca pirata i el lloc on trobaràs els set futurs corsaris.
    </p>
    <button id="btnOk">OK</button>
  `;

  // Contenido formulario
  const formulariHTML = `
    <img src="images/llave.png" alt="Llave" class="llave-icon" />
    <h1 style="text-align:center; font-weight:700; font-size:2rem; margin-bottom:1rem; color:#2e260f;">Paraula clau</h1>
    <p style="text-align:center; color:#4b3e1b; margin-bottom:1rem;">Introdueix la paraula secreta per descobrir el tresor.</p>
    <input
      type="password"
      id="clau"
      placeholder="Paraula secreta..."
      autocomplete="off"
    />
    <div id="menuOpcions">
      <button id="btnTornar">Tornar</button>
      <button id="btnComprovar">Comprovar</button>
    </div>
    <p id="missatge"></p>
  `;

  // Función para mostrar historia
  function mostrarHistoria() {
    contenedor.innerHTML = historiaHTML;
    document.getElementById('btnOk').addEventListener('click', () => {
      mostrarFormulari();
    });
  }

  // Función para mostrar formulario
  function mostrarFormulari() {
    contenedor.innerHTML = formulariHTML;

    const btnTornar = document.getElementById('btnTornar');
    const btnComprovar = document.getElementById('btnComprovar');
    const missatge = document.getElementById('missatge');
    const clauInput = document.getElementById('clau');
    const cofre = document.getElementById('cofre');

    btnTornar.addEventListener('click', () => {
      missatge.textContent = '';
      clauInput.value = '';
      cofre.classList.add('hidden');
      mostrarHistoria();
    });

    btnComprovar.addEventListener('click', () => {
      const clauCorrecta = "corsari";
      const entrada = clauInput.value.trim().toLowerCase();

      if (entrada === clauCorrecta) {
        missatge.textContent = "";
        cofre.classList.remove("hidden");
      } else {
        missatge.textContent = "Paraula incorrecta. Torna-ho a intentar.";
        cofre.classList.add("hidden");
      }
    });
  }

  function tancarCofre() {
    document.getElementById('cofre').classList.add('hidden');
  }
  window.tancarCofre = tancarCofre; // para llamar desde onclick inline

  // Iniciar mostrando la historia
  mostrarHistoria();
</script>

</body>
</html>
